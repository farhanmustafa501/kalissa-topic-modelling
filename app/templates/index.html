{% extends "base.html" %}
{% block title %}Kalisa – Home{% endblock %}
{% block content %}
<section class="rounded-3 p-4 p-md-5 mb-4 hero-gradient text-white shadow-sm">
	<div class="row align-items-center">
		<div class="col-md-8">
			<h1 class="display-6 fw-semibold mb-2">Discover Topics Across Your Documents</h1>
			<p class="lead mb-3">Generate topic graphs, insights, and topic-scoped Q&A with citations. This is a placeholder UI wired to mock APIs.</p>
			<div class="d-flex gap-2">
				<a href="/ui/collections" class="btn btn-light btn-lg">View Collections</a>
				<a href="/ui/collections" class="btn btn-outline-light btn-lg">Create Collection</a>
			</div>
		</div>
		<div class="col-md-4 d-none d-md-block text-end">
			<span class="badge text-bg-light text-dark px-3 py-2">Prototype</span>
		</div>
	</div>
</section>
<div class="row g-4">
	<div class="col-lg-8">
		<div class="card shadow-sm">
			<div class="card-body">
				<h5 class="card-title">Collections</h5>
				<p class="card-text">Create a collection, add documents, and explore topic graphs.</p>
				<a href="/ui/collections" class="btn btn-primary">View All Collections</a>
			</div>
		</div>
		<div class="row row-cols-1 row-cols-md-3 g-3 mt-1">
			<div class="col">
				<div class="card stat-card">
					<div class="card-body">
						<div class="text-muted small">Collections</div>
						<div class="h4 mb-0">{{ collections|length if collections is defined else 0 }}</div>
					</div>
				</div>
			</div>
			<div class="col">
				<div class="card stat-card">
					<div class="card-body">
						<div class="text-muted small">Topics</div>
						<div class="h4 mb-0">—</div>
					</div>
				</div>
			</div>
			<div class="col">
				<div class="card stat-card">
					<div class="card-body">
						<div class="text-muted small">Documents</div>
						<div class="h4 mb-0">—</div>
					</div>
				</div>
			</div>
		</div>
		{% if collections %}
		<div class="mt-3">
			<h6 class="mb-2">Recent Collections</h6>
			<div class="row row-cols-1 row-cols-md-3 g-3">
				{% for c in collections %}
				<div class="col">
					<div class="card h-100">
						<div class="card-body">
							<h5 class="card-title mb-1">{{ c.name }}</h5>
							<div class="text-muted small mb-2">{{ c.description or 'No description' }}</div>
							<a href="/ui/collections/{{ c.id }}" class="btn btn-outline-primary btn-sm">Open</a>
							<a href="/ui/collections/{{ c.id }}/graph" class="btn btn-primary btn-sm">Graph</a>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
		{% else %}
		<div class="alert alert-info mt-3">No collections yet. Create one from the Collections page.</div>
		{% endif %}
	</div>
	<div class="col-lg-4">
		<div class="card">
			<div class="card-body">
				<h6 class="card-title">Health Check</h6>
				<button class="btn btn-outline-secondary btn-sm" hx-get="/api/health" hx-target="#health-result" hx-indicator="#health-loading">Check</button>
				<div class="spinner-border spinner-border-sm htmx-indicator ms-2" id="health-loading" role="status"></div>
				<pre id="health-result" class="mt-3 mb-0 small bg-light p-2 rounded"></pre>
			</div>
		</div>
	</div>
</div>
{% endblock %}


